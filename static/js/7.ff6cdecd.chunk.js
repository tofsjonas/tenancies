(this.webpackJsonptenancies=this.webpackJsonptenancies||[]).push([[7],{210:function(e,t,n){"use strict";n.r(t);var c,a,i=n(30),s=n(63),r=n(0),o=n(14),b=n(56),j=n(57),l=n(36),d=n(46),u=n(45),O=n(206),_=n(172),f=n(64),h=n(53),m=n(62),x=n(207),p=n(48),y=n(176),g=n(16),v=n(177),k=n(87),w=n(205),z=n(3),C=function(e){var t=e.tenancy,n=Object(p.c)().success,c=Object(r.useRef)(!1),a=Object(_.a)().t,s=Object(r.useContext)(j.d).dispatch,o=Object(r.useState)(!1),b=Object(i.a)(o,2),l=b[0],d=b[1],u=t.size,O=t.nbr_of_rooms,f=t.tenant_information,x=t.utilities,y=Object(w.a)({defaultValues:{size:u,nbr_of_rooms:O,tenant_information:f,utilities:x}}),C=y.handleSubmit,I=y.register,S=y.formState,R=y.reset,V=S.isDirty,A=S.isValid;Object(r.useEffect)((function(){return c.current=!0,function(){c.current=!1}}),[]);return Object(z.jsxs)(v.a,{onSubmit:C((function(e){d(!0);var i={id:t.db_id,data:e};Object(k.d)(i).then((function(i){R(e);var r=Object(g.a)(Object(g.a)({},t),i);s({type:j.e,payload:r}),n(a("edit_tenancy_saved_confirmation")),c.current&&d(!1)})).catch((function(e){c.current&&d(!1),console.log(e)}))})),children:[Object(z.jsxs)(v.a.Group,{controlId:"formBasicSize",children:[Object(z.jsx)(v.a.Label,{children:a("edit_tenancy_label_size")}),Object(z.jsx)(v.a.Control,Object(g.a)(Object(g.a)({},I("size")),{},{type:"number",step:"0.1",placeholder:a("edit_tenancy_label_size_placeholder")}))]}),Object(z.jsxs)(v.a.Group,{controlId:"formBasicNbrOfRooms",children:[Object(z.jsx)(v.a.Label,{children:a("edit_tenancy_label_nbr_of_rooms")}),Object(z.jsx)(v.a.Control,Object(g.a)(Object(g.a)({},I("nbr_of_rooms")),{},{defaultValue:t&&t.nbr_of_rooms,type:"number",step:"1",placeholder:a("edit_tenancy_label_nbr_of_rooms_placeholder")}))]}),Object(z.jsxs)(v.a.Group,{controlId:"formBasicUtilities",children:[Object(z.jsx)(v.a.Label,{children:a("edit_tenancy_label_utilities")}),Object(z.jsx)(v.a.Control,Object(g.a)(Object(g.a)({},I("utilities")),{},{defaultValue:t&&t.utilities,as:"textarea",rows:3,placeholder:a("edit_tenancy_label_utilities_placeholder")}))]}),Object(z.jsxs)(v.a.Group,{controlId:"formBasicTenantInformation",children:[Object(z.jsx)(v.a.Label,{children:a("edit_tenancy_label_tenant_information")}),Object(z.jsx)(v.a.Control,Object(g.a)(Object(g.a)({},I("tenant_information")),{},{defaultValue:t&&t.tenant_information,as:"textarea",rows:3,placeholder:a("edit_tenancy_label_tenant_information_placeholder")}))]}),Object(z.jsxs)(h.a,{variant:"primary",type:"submit",disabled:!V||!A,children:[l&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(m.a,{animation:"border",role:"status",size:"sm"})," ",a("edit_tenancy_save_button_is_saving")]}),!l&&a("edit_tenancy_save_button")]})]})},I=n(38),S=Object(f.a)(l.a)(c||(c=Object(s.a)(["\n  img {\n    max-width: 85vw;\n  }\n  margin-bottom: 40px;\n"]))),R=function(e){var t=e.item,n="https://maps.googleapis.com/maps/api/streetview?size=400x400&location=".concat(t.y,",").concat(t.x,"&fov=70&pitch=0&key=").concat("AIzaSyDMRJ0PlQlYZP2iO0or1VPejkmA1vWm7JQ"),c=Object(_.a)().t,a=Object(p.c)().success,s=Object(r.useContext)(I.a).user,b=Object(r.useState)(!1),l=Object(i.a)(b,2),O=l[0],f=l[1],g=Object(r.useContext)(j.d).dispatch,v=Object(o.g)(),w=Object(r.useRef)(!1);Object(r.useEffect)((function(){return w.current=!0,function(){w.current=!1}}),[]);return Object(z.jsxs)(S,{children:[Object(z.jsx)(d.a,{children:Object(z.jsx)(u.a,{children:Object(z.jsx)("h1",{children:t.tekst})})}),Object(z.jsxs)(d.a,{children:[Object(z.jsx)(u.a,{lg:!0,children:Object(z.jsx)(y.a,{crossOrigin:"anonymous",width:"500",src:n,rounded:!0})}),Object(z.jsx)(u.a,{lg:!0,children:Object(z.jsx)(C,{tenancy:t})})]}),Object(z.jsx)(d.a,{children:Object(z.jsxs)(u.a,{children:[Object(z.jsx)("br",{}),Object(z.jsxs)(h.a,{variant:"danger",onClick:function(){f(!0),window.confirm("Are you sure?")?Object(k.b)(t.db_id,s).then((function(){g({type:j.b,payload:t.id}),a(c("tenancy_was_deleted_confirmation")),v("tenancies"),w.current&&f(!1)})).catch((function(e){f(!1),console.log(e)})):f(!1)},children:[O&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(m.a,{animation:"border",role:"status",size:"sm"})," ",c("edit_tenancy_delete_button_is_deleting")]}),!O&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(x.a,{})," ",c("edit_tenancy_delete_button")]})]})]})})]})},V=Object(f.a)(O.a)(a||(a=Object(s.a)(["\n  ol {\n    background-color: transparent;\n  }\n"])));t.default=function(){var e=Object(o.h)().id,t=Object(_.a)().t,n=Object(r.useContext)(j.d).tenancies,c=Object(r.useState)(null),a=Object(i.a)(c,2),s=a[0],f=a[1],h=Object(r.useState)(""),m=Object(i.a)(h,2),x=m[0],p=m[1];return Object(r.useEffect)((function(){var t=n.filter((function(t){return t.id===e}))[0];t?(p(""),f(t)):(f(null),p("Item not found :("))}),[n,e]),Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(V,{children:[Object(z.jsx)(O.a.Item,{linkAs:b.b,linkProps:{to:"/"},children:t("tenancy_item_breadcrumb_back_to_list")}),Object(z.jsxs)(O.a.Item,{active:!0,children:[x&&"ERROR",s&&s.tekst]})]}),x&&Object(z.jsx)(l.a,{children:Object(z.jsx)(d.a,{children:Object(z.jsx)(u.a,{children:x})})}),s&&Object(z.jsx)(R,{item:s})]})}}}]);
//# sourceMappingURL=7.ff6cdecd.chunk.js.map