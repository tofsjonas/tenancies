(this.webpackJsonptenancies=this.webpackJsonptenancies||[]).push([[6],{211:function(e,t,n){"use strict";n.r(t);var c=n(16),a=n(30),s=n(0),i=n(14),o=n(48),r=n(204),d=n(53),u=n(62),j=n(177),l=n(88),b=n(186),h=n.n(b),O=n(108),f=n(57),_=n(172),p=n(36),y=n(3);t.default=function(e){var t=e.hideModal,n=Object(s.useContext)(p.a).user,b=Object(_.a)().t,g=Object(o.c)().success,x=Object(s.useContext)(f.d).dispatch,m=Object(i.g)(),v=Object(s.useRef)(!1),k=Object(s.useState)(!1),S=Object(a.a)(k,2),C=S[0],D=S[1],L=Object(s.useState)(!1),q=Object(a.a)(L,2),w=q[0],B=q[1],F=Object(s.useState)(),A=Object(a.a)(F,2),E=A[0],H=A[1],I=Object(s.useState)([]),J=Object(a.a)(I,2),M=J[0],z=J[1];Object(s.useEffect)((function(){return v.current=!0,function(){v.current=!1}}),[]);return Object(y.jsx)(r.a,{show:!0,onHide:t,children:Object(y.jsxs)(j.a,{onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),E){B(!0);var a=Object(c.a)({tekst:E.tekst},E.adgangsadresse);Object(l.a)(a,n).then((function(e){v.current&&(x({type:f.a,payload:e}),g(b("add_tenancy_confirmation")),B(!1),t(),m("tenancy/".concat(a.id)))})).catch((function(e){v.current&&B(!1),console.log("ADD FAILED:\n".concat(e.message))}))}},children:[Object(y.jsx)(r.a.Header,{closeButton:!0,children:Object(y.jsx)(r.a.Title,{children:b("add_tenancy_modal_title")})}),Object(y.jsxs)(r.a.Body,{children:[b("add_tenancy_start_typing_to_fetch"),Object(y.jsx)(O.a,{filterBy:function(){return!0},id:"async-tenancies",isLoading:C,labelKey:"tekst",minLength:3,onSearch:function(e){D(!0),function(e){var t=e.query,n=e.success,c=e.fail;h.a.get("https://api.dataforsyningen.dk/adgangsadresser/autocomplete?q="+escape(t)).then((function(e){200===e.status&&n(e.data)})).catch((function(e){c(e)}))}({query:e,success:function(e){z(e),D(!1)},fail:function(e){D(!1),console.log(e.message)}})},onChange:function(e){H(e[0])},options:M,placeholder:b("add_tenancy_fetch_placeholder"),renderMenuItemChildren:function(e){return Object(y.jsx)("span",{children:e.tekst})}})]}),Object(y.jsxs)(r.a.Footer,{children:[Object(y.jsx)(d.a,{variant:"secondary",onClick:t,children:b("add_tenancy_cancel_button")}),Object(y.jsxs)(d.a,{variant:E?"primary":"secondary",type:"submit",disabled:!E||w,children:[w&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(u.a,{animation:"border",role:"status",size:"sm",children:Object(y.jsx)("span",{className:"sr-only",children:"Loading..."})})," ",b("add_tenancy_save_button_is_saving")]}),!w&&b("add_tenancy_save_button")]})]})]})})}}}]);
//# sourceMappingURL=6.55c5f4f6.chunk.js.map