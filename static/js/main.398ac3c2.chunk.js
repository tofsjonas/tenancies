(this.webpackJsonptenancies=this.webpackJsonptenancies||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return l}));var c=n(9),a=n(53),r=n(8),i=n(0),s=n(2),u="SET_TENANCIES",o="ADD_TENANCY",j="DELETE_TENANCY",d={tenancies:[]},b=function(e,t){switch(t.type){case u:return Object(r.a)(Object(r.a)({},e),{},{tenancies:t.payload});case o:return Object(r.a)(Object(r.a)({},e),{},{tenancies:[].concat(Object(a.a)(e.tenancies),[t.payload])});case j:return Object(r.a)(Object(r.a)({},e),{},{tenancies:e.tenancies.filter((function(e){return e.adgangsadresse.id!==t.payload}))});default:return e}},l=Object(i.createContext)(Object(r.a)(Object(r.a)({},d),{},{dispatch:function(){return null}}));t.e=function(e){var t=e.children,n=Object(i.useReducer)(b,d),a=Object(c.a)(n,2),u=a[0],o=a[1];return Object(s.jsx)(l.Provider,{value:Object(r.a)(Object(r.a)({},u),{},{dispatch:o}),children:t})}},19:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return d}));var c=n(14),a=n.n(c),r=n(24),i=n(51),s=n.n(i),u=function(e){var t=e.query,n=e.success,c=e.fail;s.a.get("https://api.dataforsyningen.dk/adgangsadresser/autocomplete?q="+escape(t)).then((function(e){200===e.status&&n(e.data)})).catch((function(e){c(e)}))},o=function(){var e=Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=localStorage.getItem("tenancies")||"[]";try{var c=JSON.parse(n);setTimeout((function(){e(c)}),200)}catch(a){localStorage.setItem("tenancies",""),t(new Error("Data corrupt, resetting!"))}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=localStorage.getItem("tenancies")||"[]";try{var a=JSON.parse(c);a.push(t),localStorage.setItem("tenancies",JSON.stringify(a)),setTimeout((function(){e(t)}),600)}catch(r){n(r)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=localStorage.getItem("tenancies")||"[]";try{var a=JSON.parse(c).filter((function(e){return e.adgangsadresse.id!==t}));localStorage.setItem("tenancies",JSON.stringify(a)),setTimeout((function(){e()}),200)}catch(r){n(r)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},61:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n(15),i=n.n(r),s=(n(61),n(23)),u=n(13),o=n(16),j=n(9),d=n(49),b=n(52),l=n(20),f=n(28),O=n(46),h=n(89),p=n(19),g=n(10),x=n(29),m=n(88),v=n(2),y=function(){var e=parseInt("2"),t=Object(a.useContext)(g.d),n=t.tenancies,c=t.dispatch,r=Object(a.useState)(),i=Object(j.a)(r,2),s=i[0],d=i[1],b=Object(a.useState)(1),f=Object(j.a)(b,2),O=f[0],h=f[1],y=Object(a.useState)(1),S=Object(j.a)(y,2),w=S[0],E=S[1];Object(a.useEffect)((function(){w>1&&w>O&&E(w-1)}),[w,O]),Object(a.useEffect)((function(){var t=(w-1)*e,c=w*e;d(n.slice(t,c))}),[w,n,e]),Object(a.useEffect)((function(){var t=Math.ceil(n.length/e);t>0&&h(t)}),[n,e]);return Object(v.jsx)("div",{className:"TenancyList",children:s&&s.length>0&&Object(v.jsxs)(v.Fragment,{children:[s.map((function(e){return Object(v.jsxs)(o.a,{className:"mt-1 align-items-center",children:[Object(v.jsx)(u.a,{children:e.tekst}),Object(v.jsx)(u.a,{md:"auto",children:Object(v.jsx)(l.a,{variant:"danger",onClick:function(){var t;t=e.adgangsadresse.id,window.confirm("Are you sure?")&&Object(p.b)(t).then((function(){c({type:g.b,payload:t})})).catch((function(e){console.log(e)}))},children:Object(v.jsx)(m.a,{})})})]},e.tekst)})),O>1&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Object(v.jsx)(x.a,{children:function(){for(var e=[],t=function(t){e.push(Object(v.jsx)(x.a.Item,{active:t===w,onClick:function(){E(t)},children:t},t))},n=1;n<=O;n++)t(n);return e}()})]})]})})},S=Object(a.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,135))})),w=Object(b.a)(l.a)(c||(c=Object(d.a)(["\n  width: 50px;\n  height: 50px;\n  border-radius: 50px;\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n"]))),E=function(){var e=Object(a.useContext)(g.d),t=e.tenancies,n=e.dispatch,c=Object(a.useState)(!0),r=Object(j.a)(c,2),i=r[0],d=r[1],b=Object(a.useState)(!1),l=Object(j.a)(b,2),x=l[0],m=l[1],E=Object(a.useRef)(!1);Object(a.useEffect)((function(){return E.current=!0,Object(p.d)().then((function(e){E.current&&(n({type:g.c,payload:e}),d(!1))})).catch((function(e){d(!1),console.log(e)})),function(){E.current=!1}}),[n]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(f.a,{bg:"light",expand:"lg",children:Object(v.jsx)(f.a.Brand,{children:"My Tenancies"})}),Object(v.jsxs)(s.a,{fluid:"md",children:[i&&Object(v.jsx)(O.a,{animation:"border",role:"status",children:Object(v.jsx)("span",{className:"sr-only",children:"Loading..."})}),!i&&t&&0===t.length&&Object(v.jsx)(o.a,{children:Object(v.jsx)(u.a,{children:"You have no tenancies, go ahead and add one!"})}),!i&&t&&t.length>0&&Object(v.jsx)(y,{})]}),Object(v.jsx)(w,{onClick:function(){m(!0)},children:Object(v.jsx)(h.a,{})}),Object(v.jsx)(a.Suspense,{fallback:"loading...",children:x&&Object(v.jsx)(S,{hideModal:function(){m(!1)}})})]})};var N=function(){return Object(v.jsx)(g.e,{children:Object(v.jsx)(s.a,{children:Object(v.jsx)(o.a,{children:Object(v.jsx)(u.a,{children:Object(v.jsx)(E,{})})})})})},k=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,136)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(v.jsx)(N,{}),document.getElementById("root")),k()}},[[86,1,2]]]);
//# sourceMappingURL=main.398ac3c2.chunk.js.map