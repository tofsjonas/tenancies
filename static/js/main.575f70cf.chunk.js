(this.webpackJsonptenancies=this.webpackJsonptenancies||[]).push([[0],{14:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return f}));var c=n(9),a=n(53),r=n(8),i=n(0),s=n(2),u="SET_TENANCIES",o="ADD_TENANCY",j="DELETE_TENANCY",d={tenancies:[]},b=function(e,t){switch(t.type){case u:return Object(r.a)(Object(r.a)({},e),{},{tenancies:t.payload});case o:return Object(r.a)(Object(r.a)({},e),{},{tenancies:[].concat(Object(a.a)(e.tenancies),[t.payload])});case j:return Object(r.a)(Object(r.a)({},e),{},{tenancies:e.tenancies.filter((function(e){return e.adgangsadresse.id!==t.payload}))});default:return e}},f=Object(i.createContext)(Object(r.a)(Object(r.a)({},d),{},{dispatch:function(){return null}}));t.e=function(e){var t=e.children,n=Object(i.useReducer)(b,d),a=Object(c.a)(n,2),u=a[0],o=a[1];return Object(s.jsx)(f.Provider,{value:Object(r.a)(Object(r.a)({},u),{},{dispatch:o}),children:t})}},26:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return d}));var c=n(12),a=n.n(c),r=n(22),i=n(51),s=n.n(i),u=function(e){var t=e.query,n=e.success,c=e.fail;s.a.get("https://api.dataforsyningen.dk/adgangsadresser/autocomplete?q="+escape(t)).then((function(e){200===e.status&&n(e.data)})).catch((function(e){c(e)}))},o=function(){var e=Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=localStorage.getItem("tenancies")||"[]";try{var c=JSON.parse(n);setTimeout((function(){e(c)}),200)}catch(a){localStorage.setItem("tenancies",""),t(new Error("Data corrupt, resetting!"))}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=localStorage.getItem("tenancies")||"[]";try{var a=JSON.parse(c);a.push(t),localStorage.setItem("tenancies",JSON.stringify(a)),setTimeout((function(){e(t)}),600)}catch(r){n(r)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=localStorage.getItem("tenancies")||"[]";try{var a=JSON.parse(c).filter((function(e){return e.adgangsadresse.id!==t}));localStorage.setItem("tenancies",JSON.stringify(a)),setTimeout((function(){e()}),200)}catch(r){n(r)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},60:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n(13),i=n.n(r),s=(n(60),n(21)),u=n(15),o=n(18),j=n(9),d=n(49),b=n(52),f=n(27),l=n(28),O=n(46),h=n(29),p=n(88),g=n(89),x=n(26),m=n(14),v=n(2),y=Object(a.lazy)((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,135))})),S=Object(b.a)(f.a)(c||(c=Object(d.a)(["\n  width: 50px;\n  height: 50px;\n  border-radius: 50px;\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n"]))),w=function(){var e=parseInt("2"),t=Object(a.useContext)(m.d),n=t.tenancies,c=t.dispatch,r=Object(a.useState)(),i=Object(j.a)(r,2),d=i[0],b=i[1],w=Object(a.useState)(!0),E=Object(j.a)(w,2),N=E[0],k=E[1],C=Object(a.useState)(1),I=Object(j.a)(C,2),T=I[0],F=I[1],J=Object(a.useState)(1),P=Object(j.a)(J,2),A=P[0],D=P[1],L=Object(a.useState)(!1),B=Object(j.a)(L,2),M=B[0],Y=B[1],_=Object(a.useRef)(!1);Object(a.useEffect)((function(){A>1&&A>T&&D(A-1)}),[A,T]),Object(a.useEffect)((function(){var t=(A-1)*e,c=A*e;b(n.slice(t,c))}),[A,n,e]),Object(a.useEffect)((function(){var t=Math.ceil(n.length/e);t>0&&F(t)}),[n,e]);Object(a.useEffect)((function(){return _.current=!0,Object(x.d)().then((function(e){_.current&&(c({type:m.c,payload:e}),k(!1))})).catch((function(e){k(!1),console.log(e)})),function(){_.current=!1}}),[c]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.a,{bg:"light",expand:"lg",children:Object(v.jsx)(l.a.Brand,{children:"My Tenancies"})}),Object(v.jsxs)(s.a,{fluid:"md",children:[N&&Object(v.jsx)(O.a,{animation:"border",role:"status",children:Object(v.jsx)("span",{className:"sr-only",children:"Loading..."})}),!N&&d&&d.length>0&&Object(v.jsxs)(v.Fragment,{children:[d.map((function(e){return Object(v.jsxs)(o.a,{className:"mt-1 align-items-center",children:[Object(v.jsx)(u.a,{children:e.tekst}),Object(v.jsx)(u.a,{md:"auto",children:Object(v.jsx)(f.a,{variant:"danger",onClick:function(){var t;t=e.adgangsadresse.id,window.confirm("Are you sure?")&&Object(x.b)(t).then((function(){c({type:m.b,payload:t})})).catch((function(e){console.log(e)}))},children:Object(v.jsx)(p.a,{})})})]},e.tekst)})),T>1&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Object(v.jsx)(h.a,{children:function(){for(var e=[],t=function(t){e.push(Object(v.jsx)(h.a.Item,{active:t===A,onClick:function(){D(t)},children:t},t))},n=1;n<=T;n++)t(n);return e}()})]})]}),!N&&n&&0===n.length&&Object(v.jsx)(o.a,{children:Object(v.jsx)(u.a,{children:"You have no tenancies, go ahead and add one!"})})]}),Object(v.jsx)(S,{onClick:function(){Y(!0)},children:Object(v.jsx)(g.a,{})}),Object(v.jsx)(a.Suspense,{fallback:"loading...",children:M&&Object(v.jsx)(y,{hideModal:function(){Y(!1)}})})]})};var E=function(){return Object(v.jsx)(m.e,{children:Object(v.jsx)(s.a,{children:Object(v.jsx)(o.a,{children:Object(v.jsx)(u.a,{children:Object(v.jsx)(w,{})})})})})},N=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,136)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(v.jsx)(E,{}),document.getElementById("root")),N()}},[[85,1,2]]]);
//# sourceMappingURL=main.575f70cf.chunk.js.map